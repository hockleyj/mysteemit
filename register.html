
<html>

<head>
    <style>
        body {
            font-family: ubuntu;
            font-size: 13px;
        }

        label {
            font-family: ubuntu;
            font-size: 13px;
        }

        input[type='text'],
        input[type='password'],
        input[type='number'],
        textarea {
            font-family: ubuntu;
            font-size: 13px;
            width: 300px;
            resize: none;
        }

        input[type='button'] {
            font-family: ubuntu;
            font-size: 13px;
            font-weight: bold;
        }

        div.error {
            font-family: ubuntu;
            font-size: 13px;
            color: red;
        }
		
	div.output,
	span.output {
		font-family: ubuntu;
		font-size: 13px;
	}
    </style>
    <script src="https://cdn.steemjs.com/lib/latest/steem.min.js"></script>
    <title>STEEM BLOCKCHAIN - REGISTER</title>
</head>

<body>
    <div align='center'><a target="_blank" href="https://steemit.com/steemit/@msg768/registering-for-a-new-account-how-to-bypass-phone-and-email-verification" style="">REGISTERING FOR A NEW ACCOUNT - HOW TO BYPASS PHONE &amp; EMAIL VERIFICATION</a></div>
    <br />
    <div align='center'>
        <h2>
            REGISTRATION FEE: 8.000 STEEM
            <h2>
    </div>
    <script>
        var totalFee = 8;
        var myFee = '2.000 STEEM';
        var steemFee = '6.000 STEEM';
        var myAccount = 'msg768';
        var barId = null;

        function checkNewAccountName() {
            var newAccountName = document.getElementById('newAccountName').value;
            steem.api.getAccounts([newAccountName], function(err, result) {
                if (result.length == 1) {
                    var errorMessage = 'Not available!';
                    document.getElementById('newAccountName_err').innerHTML = errorMessage;
                    return false;
                } else {
                    var newAccountName = document.getElementById('newAccountName').value;
                    if (steem.utils.validateAccountName(newAccountName) != null) {
                        var errorMessage = 'Not valid!';
                        document.getElementById('newAccountName_err').innerHTML = errorMessage;
                        return false;
                    } else {
                        document.getElementById('newAccountName_err').innerHTML = '';
                        return true;
                    }
                }
            });
        }

        function checkCurrentAccountName() {
            var currentAccountName = document.getElementById('currentAccountName').value;
            steem.api.getAccounts([currentAccountName], function(err, result) {
                if (result.length == 0) {
                    var errorMessage = 'Not available!';
                    document.getElementById('currentAccountName_err').innerHTML = errorMessage;
                    return false;
                } else {
                    if (parseFloat(result[0].balance) < totalFee) {
                        var errorMessage = 'Not enough STEEM!';
                        document.getElementById('currentAccountName_err').innerHTML = errorMessage;
                        return false;
                    } else {
                        document.getElementById('currentAccountName_err').innerHTML = '';
                        return true;
                    }
                }
            });
        }

        function checkActiveKey() {
            var activeKey = document.getElementById('activeKey').value;
            var errorMessage = '';
            document.getElementById('activeKey_err').innerHTML = errorMessage;

            if (!steem.auth.isWif(activeKey)) {
                var errorMessage = 'False key!';
                document.getElementById('activeKey_err').innerHTML = errorMessage;
            } else {
                var currentAccountName = document.getElementById('currentAccountName').value;
                steem.api.getAccounts([currentAccountName], function(err, result) {
                    if (result.length > 0) {
                        var activeKey = document.getElementById('activeKey').value;
                        var publicKey = result[0].active.key_auths[0][0];
                        if (!steem.auth.wifIsValid(activeKey, publicKey)) {
                            var errorMessage = 'Wrong key!';
                            document.getElementById('activeKey_err').innerHTML = errorMessage;
                        }
                    }
                });
            }
        }

        function checkPassword() {
            var newAccountPassword = document.getElementById('newAccountPassword').value;
            if (newAccountPassword == '') {
                var errorMessage = 'Choose a password!';
                document.getElementById('newAccountPassword_err').innerHTML = errorMessage;
            } else {
                if (newAccountPassword.length < 31) {
                    var errorMessage = 'Too short!';
                    document.getElementById('newAccountPassword_err').innerHTML = errorMessage;
                } else {
                    document.getElementById('newAccountPassword_err').innerHTML = '';
                }
            }
        }

        function generateNewPassword() {
            document.getElementById('newAccountPassword').value = steem.formatter.createSuggestedPassword();
        }

        function validate() {
            checkNewAccountName();
            checkActiveKey();
            checkCurrentAccountName();
            checkPassword();

            if (document.getElementById('currentAccountName_err').innerHTML != '') return false;
            if (document.getElementById('activeKey_err').innerHTML != '') return false;
            if (document.getElementById('newAccountName_err').innerHTML != '') return false;
            if (document.getElementById('newAccountPassword_err').innerHTML != '') return false;

            return true;
        }

        function createNewAccount() {
            var newAccountName = document.getElementById('newAccountName').value;
            var pwd = document.getElementById('newAccountPassword').value;
            var newOwnerKey = steem.auth.toWif(newAccountName, pwd, 'owner');
            newOwnerKey = steem.auth.wifToPublic(newOwnerKey);
            var newActiveKey = steem.auth.toWif(newAccountName, pwd, 'active');
            newActiveKey = steem.auth.wifToPublic(newActiveKey);
            var newPostingKey = steem.auth.toWif(newAccountName, pwd, 'posting');
            newPostingKey = steem.auth.wifToPublic(newPostingKey);
            var newMemoKey = steem.auth.toWif(newAccountName, pwd, 'memo');
            newMemoKey = steem.auth.wifToPublic(newMemoKey);
            var jsonMetadata = '';

            var creator = document.getElementById('currentAccountName').value;
            var creatorWif = document.getElementById('activeKey').value;
            var fee = steemFee;

            var owner = new Object();
            owner.weight_threshold = 1;
            owner.account_auths = [];
            owner.key_auths = new Array();
            owner.key_auths[0] = new Array();
            owner.key_auths[0][0] = newOwnerKey;
            owner.key_auths[0][1] = 1;

            var active = new Object();
            active.weight_threshold = 1;
            active.account_auths = [];
            active.key_auths = new Array();
            active.key_auths[0] = new Array();
            active.key_auths[0][0] = newActiveKey;
            active.key_auths[0][1] = 1;

            var posting = new Object();
            posting.weight_threshold = 1;
            posting.account_auths = [];
            posting.key_auths = new Array();
            posting.key_auths[0] = new Array();
            posting.key_auths[0][0] = newPostingKey;
            posting.key_auths[0][1] = 1;

            steem.broadcast.accountCreate(creatorWif, fee, creator, newAccountName, owner, active, posting, newMemoKey, jsonMetadata, function(err, result) {
                document.getElementById('bar').innerHTML = '';
                window.clearInterval(barId);
                if (err != null) {
                    console.log(err);
                    document.getElementById('status').innerHTML = 'Failed!';
                    document.getElementById('error').innerHTML = err.message.split("\n")[1] + '<br />' + err.message.split("\n")[2];
                    enableAll();
                } else {
                    steem.broadcast.transfer(creatorWif, creator, myAccount, myFee, 'REGISTER@github - ' + newAccountName, function(e, r) {
                        document.getElementById('status').innerHTML = 'DONE!';
                    });
                }
            });
        }

        function disableAll() {
            document.getElementById('error').innerHTML = '';
            document.getElementById('currentAccountName').disabled = true;
            document.getElementById('activeKey').disabled = true;
            document.getElementById('newAccountName').disabled = true;
            document.getElementById('newAccountPassword').disabled = true;
            document.getElementById('register').disabled = true;
            document.getElementById('status').innerHTML = 'Processing';
            barId = window.setInterval(animateProcess, 100);
        }

        function animateProcess() {
            var status = document.getElementById('bar').innerHTML;
            if (status.length == 3) {
                status = '.';
            } else {
                status += '.';
            }

            document.getElementById('bar').innerHTML = status;
        }

        function enableAll() {
            document.getElementById('currentAccountName').disabled = false;
            document.getElementById('activeKey').disabled = false;
            document.getElementById('newAccountName').disabled = false;
            document.getElementById('newAccountPassword').disabled = false;
            document.getElementById('register').disabled = false;
        }

        function register() {
            if (validate()) {
                var response = confirm('Have you saved your username and password? If registration succeeds and you lose your username and/or password, I cannot recover them for you!');
                if (response) {
                    disableAll();
                    createNewAccount();
                }
            }
        }
    </script>
    <table align='center'>
        <tbody>
            <tr>
                <td colspan='3'>
                    <hr />
                </td>
            </tr>
            <tr>
                <td style="width: 100px"><label for="currentAccountName">Your Account Name: </label></td>
                <td><input type="text" id="currentAccountName" onchange="checkCurrentAccountName();"></td>
                <td style="width: 180px">
                    <div class="error" id="currentAccountName_err"></div>
                </td>
            </tr>
            <tr>
                <td><label for="activeKey">Your Active Key: </label></td>
                <td><input type="password" id="activeKey" onchange="checkActiveKey();"></td>
                <td>
                    <div class="error" id="activeKey_err"></div>
                </td>
            </tr>
            <tr>
                <td><label for="newAccountName">New Account Name: </label></td>
                <td><input type="text" id="newAccountName" onchange="checkNewAccountName();"></td>
                <td>
                    <div class="error" id="newAccountName_err"></div>
                </td>
            </tr>
            <tr>
                <td><label for="newAccountPassword">New Account Password: </label></td>
                <td><input type="text" id="newAccountPassword"></td>
                <td>
                    <div class="error" id="newAccountPassword_err"></div>
                </td>
            </tr>
            <tr>
                <td>&nbsp;</td>
                <td colspan="2"><input type="button" id="register" value="Register" onclick="register();">&nbsp;<span class="output" id="status"></span><span id="bar"></span></td>
            </tr>
            <tr>
                <td colspan='3'>
                    <hr />
                </td>
            </tr>
            <tr>
                <td colspan="3">
                    <div class="error" id="error"></div>
                </td>
            </tr>
        </tbody>
    </table>
    <script>
        generateNewPassword();
    </script>
</body>

</html>
